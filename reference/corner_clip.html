<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Corners can be rounded in many ways. One approach is to recursively cut away
a part of the corner, introducing a new edge into the line/polygon. Chaikin's
algorithm defines the cut to be placed 1/4th into the edges on either side of
the corner. As the recursion progresses the result approaches the bspline
defined by the points. Chaikins algorithm works best on rather coarse
polygons as the edge length defines the extent of the cutting. Subdividing
all edges into two will thus alter the result of the algorithm, just like
adding more control points would alter a b spline. The corner cutting
provided here is based on the idea of chaikin but is adaptive so that it can
ignore vertices with very obtuse angles, as well as set an upper bound on how
big the cut can be, meaning that the distance between corner points have less
effect on the rounding."><title>Round corners with an adaptive version of Chaikin's Corner Cutting algorithm — corner_clip • boundaries</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><link href="../deps/Gelasio-0.4.5/font.css" rel="stylesheet"><link href="../deps/Fira_Code-0.4.5/font.css" rel="stylesheet"><link href="../deps/Montserrat-0.4.5/font.css" rel="stylesheet"><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Round corners with an adaptive version of Chaikin's Corner Cutting algorithm — corner_clip"><meta property="og:description" content="Corners can be rounded in many ways. One approach is to recursively cut away
a part of the corner, introducing a new edge into the line/polygon. Chaikin's
algorithm defines the cut to be placed 1/4th into the edges on either side of
the corner. As the recursion progresses the result approaches the bspline
defined by the points. Chaikins algorithm works best on rather coarse
polygons as the edge length defines the extent of the cutting. Subdividing
all edges into two will thus alter the result of the algorithm, just like
adding more control points would alter a b spline. The corner cutting
provided here is based on the idea of chaikin but is adaptive so that it can
ignore vertices with very obtuse angles, as well as set an upper bound on how
big the cut can be, meaning that the distance between corner points have less
effect on the rounding."><meta property="og:image" content="https://boundaries.r-euclid.com/reference/figures/card.png"><meta property="og:image:alt" content="boundaries: Tools for manipulating polyclid polygons"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:creator" content="@thomasp85"><meta name="twitter:site" content="@rstudio"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">boundaries</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-euclid-ecosystem">Euclid ecosystem</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-euclid-ecosystem">
    <h6 class="dropdown-header" data-toc-skip>Foundation</h6>
    <a class="external-link dropdown-item" href="https://r-euclid.com">Euclid</a>
    <a class="external-link dropdown-item" href="https://polyclid.r-euclid.com">Polyclid</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Utilities</h6>
    <a class="dropdown-item" href="https://boundaries.r-euclid.com">Boundaries</a>
    <a class="external-link dropdown-item" href="https://orion.r-euclid.com">Orion</a>
  </div>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/thomasp85/boundaries/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Round corners with an adaptive version of Chaikin's Corner Cutting algorithm</h1>
      <small class="dont-index">Source: <a href="https://github.com/thomasp85/boundaries/blob/HEAD/R/corner_clip.R" class="external-link"><code>R/corner_clip.R</code></a></small>
      <div class="d-none name"><code>corner_clip.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Corners can be rounded in many ways. One approach is to recursively cut away
a part of the corner, introducing a new edge into the line/polygon. Chaikin's
algorithm defines the cut to be placed 1/4th into the edges on either side of
the corner. As the recursion progresses the result approaches the bspline
defined by the points. Chaikins algorithm works best on rather coarse
polygons as the edge length defines the extent of the cutting. Subdividing
all edges into two will thus alter the result of the algorithm, just like
adding more control points would alter a b spline. The corner cutting
provided here is based on the idea of chaikin but is adaptive so that it can
ignore vertices with very obtuse angles, as well as set an upper bound on how
big the cut can be, meaning that the distance between corner points have less
effect on the rounding.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">corner_clip</span><span class="op">(</span><span class="va">poly</span>, max_angle <span class="op">=</span> <span class="cn">Inf</span>, max_cut <span class="op">=</span> <span class="cn">Inf</span>, n_cuts <span class="op">=</span> <span class="fl">4L</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>poly</dt>
<dd><p>A <code>polyclid_polygon</code> or <code>polyclid_polyline</code> vector</p></dd>


<dt>max_angle</dt>
<dd><p>The maximum inner angle at a vertex for it to be considered
a corner</p></dd>


<dt>max_cut</dt>
<dd><p>The maximum distance from the corner vertex the rounding may
influence the polygon. Take note that this is not a measure of the radius of
the rounding as this depends on the angle of the corner</p></dd>


<dt>n_cuts</dt>
<dd><p>The number of iterations to perform of the cutting. Be aware
that the number of additional edges increases exponentially with the number
of cuts so increase this only in small steps.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>A vector of the same type as <code>poly</code>. Be aware that corner cutting may
render a polygon invalid as the rounding may cause edges to cross.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">poly</span> <span class="op">&lt;-</span> <span class="fu">polyclid</span><span class="fu">::</span><span class="fu"><a href="https://polyclid.r-euclid.com/reference/polygon.html" class="external-link">polygon</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">391</span>, <span class="fl">240</span>, <span class="fl">252</span>, <span class="fl">374</span>, <span class="fl">289</span>, <span class="fl">134</span>, <span class="fl">68</span>, <span class="fl">154</span>, <span class="fl">161</span>, <span class="fl">435</span>, <span class="fl">208</span>, <span class="fl">295</span>, <span class="fl">421</span>, <span class="fl">441</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">374</span>, <span class="fl">431</span>, <span class="fl">340</span>, <span class="fl">320</span>, <span class="fl">214</span>, <span class="fl">390</span>, <span class="fl">186</span>, <span class="fl">259</span>, <span class="fl">107</span>, <span class="fl">108</span>, <span class="fl">148</span>, <span class="fl">160</span>, <span class="fl">212</span>, <span class="fl">303</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">poly</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="corner_clip-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Default values provide non-adaptive behaviour</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu">corner_clip</span><span class="op">(</span><span class="va">poly</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># As can be seen, this behaviour is sensitive to the density of the polygon</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://r-euclid.com/reference/euclid_plot.html" class="external-link">euclid_plot</a></span><span class="op">(</span><span class="fu">corner_clip</span><span class="op">(</span><span class="fu"><a href="densify_poly.html">densify_poly</a></span><span class="op">(</span><span class="va">poly</span>, n_splits <span class="op">=</span> <span class="fl">2</span><span class="op">)</span><span class="op">)</span>, lty <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="corner_clip-2.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Use max_cut to have more local rounding</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu">corner_clip</span><span class="op">(</span><span class="va">poly</span>, max_cut <span class="op">=</span> <span class="fl">25</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="corner_clip-3.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Use max_angle to leave out very obtuse angled vertices</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu">corner_clip</span><span class="op">(</span><span class="va">poly</span>, max_cut <span class="op">=</span> <span class="fl">25</span>, max_angle <span class="op">=</span> <span class="va">pi</span> <span class="op">*</span> <span class="fl">0.8</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="corner_clip-4.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># The corner cutting also works for polylines</span></span></span>
<span class="r-in"><span><span class="va">poly</span> <span class="op">&lt;-</span> <span class="fu">polyclid</span><span class="fu">::</span><span class="fu"><a href="https://polyclid.r-euclid.com/reference/polyline.html" class="external-link">polyline</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">391</span>, <span class="fl">240</span>, <span class="fl">252</span>, <span class="fl">374</span>, <span class="fl">289</span>, <span class="fl">134</span>, <span class="fl">68</span>, <span class="fl">154</span>, <span class="fl">161</span>, <span class="fl">435</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">374</span>, <span class="fl">431</span>, <span class="fl">340</span>, <span class="fl">320</span>, <span class="fl">214</span>, <span class="fl">390</span>, <span class="fl">186</span>, <span class="fl">259</span>, <span class="fl">107</span>, <span class="fl">108</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">poly</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://r-euclid.com/reference/euclid_plot.html" class="external-link">euclid_plot</a></span><span class="op">(</span><span class="fu">corner_clip</span><span class="op">(</span><span class="va">poly</span>, max_cut <span class="op">=</span> <span class="fl">25</span><span class="op">)</span>, lty <span class="op">=</span> <span class="fl">2</span>, col <span class="op">=</span> <span class="st">"red"</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="corner_clip-5.png" alt="" width="700" height="433"></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by <a href="https://data-imaginist.com" class="external-link">Thomas Lin Pedersen</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

